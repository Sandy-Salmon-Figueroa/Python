class EncuestaSatisfaccion:
    def __init__(self):
        """Inicializa el sistema de encuestas"""
        self.respuestas = []  # Lista de tuplas: (cliente, puntuaci√≥n, comentario)
    
    def agregar_respuesta(self, cliente, puntuacion, comentario=""):
        """
        Agrega una respuesta a la encuesta
        
        Args:
            cliente (str): Nombre del cliente
            puntuacion (int): Puntuaci√≥n de 1 a 10
            comentario (str): Comentario opcional del cliente
        """
        if not 1 <= puntuacion <= 10:
            print("‚ùå Error: La puntuaci√≥n debe estar entre 1 y 10")
            return False
        
        cliente = cliente.strip().title()
        comentario = comentario.strip()
        
        respuesta = (cliente, puntuacion, comentario)
        self.respuestas.append(respuesta)
        print(f"‚úÖ Respuesta de {cliente} registrada exitosamente")
        return True
    
    def calcular_media_satisfaccion(self):
        """
        Calcula la media de satisfacci√≥n
        
        Returns:
            float: Media de puntuaciones
        """
        if not self.respuestas:
            print("üìä No hay respuestas para calcular la media")
            return 0.0
        
        total_puntuaciones = sum(respuesta[1] for respuesta in self.respuestas)
        media = total_puntuaciones / len(self.respuestas)
        
        print(f"\nüìä MEDIA DE SATISFACCI√ìN: {media:.2f}/10")
        
        # Clasificaci√≥n de la satisfacci√≥n
        if media >= 9:
            print("üéâ Excelente nivel de satisfacci√≥n")
        elif media >= 7:
            print("üëç Buen nivel de satisfacci√≥n")
        elif media >= 5:
            print("üòê Satisfacci√≥n media")
        else:
            print("‚ö†Ô∏è Baja satisfacci√≥n - Se requiere atenci√≥n")
        
        return media
    
    def listar_comentarios_negativos(self):
        """
        Lista los comentarios con puntuaci√≥n menor a 5
        
        Returns:
            list: Lista de comentarios negativos
        """
        comentarios_negativos = [
            respuesta for respuesta in self.respuestas 
            if respuesta[1] < 5
        ]
        
        if not comentarios_negativos:
            print("\n‚úÖ No hay comentarios negativos (puntuaci√≥n < 5)")
            return []
        
        print("\n" + "="*60)
        print("üî¥ COMENTARIOS NEGATIVOS (Puntuaci√≥n < 5)")
        print("="*60)
        
        for i, (cliente, puntuacion, comentario) in enumerate(comentarios_negativos, 1):
            print(f"\n{i}. {cliente} - Puntuaci√≥n: {puntuacion}/10")
            if comentario:
                print(f"   Comentario: '{comentario}'")
            else:
                print(f"   Comentario: [Sin comentario]")
        
        print(f"\nüìã Total de comentarios negativos: {len(comentarios_negativos)}")
        return comentarios_negativos
    
    def listar_comentarios_positivos(self):
        """
        Lista los comentarios con puntuaci√≥n mayor o igual a 8
        """
        comentarios_positivos = [
            respuesta for respuesta in self.respuestas 
            if respuesta[1] >= 8
        ]
        
        if not comentarios_positivos:
            print("\nüìù No hay comentarios positivos (puntuaci√≥n ‚â• 8)")
            return []
        
        print("\n" + "="*60)
        print("üü¢ COMENTARIOS POSITIVOS (Puntuaci√≥n ‚â• 8)")
        print("="*60)
        
        for i, (cliente, puntuacion, comentario) in enumerate(comentarios_positivos, 1):
            print(f"\n{i}. {cliente} - Puntuaci√≥n: {puntuacion}/10")
            if comentario:
                print(f"   Comentario: '{comentario}'")
            else:
                print(f"   Comentario: [Sin comentario]")
        
        return comentarios_positivos
    
    def mostrar_estadisticas_detalladas(self):
        """Muestra estad√≠sticas detalladas de las encuestas"""
        if not self.respuestas:
            print("üìà No hay datos para mostrar estad√≠sticas")
            return
        
        total_respuestas = len(self.respuestas)
        media = sum(respuesta[1] for respuesta in self.respuestas) / total_respuestas
        
        # Conteo por categor√≠as
        muy_negativos = len([r for r in self.respuestas if r[1] <= 3])
        negativos = len([r for r in self.respuestas if 4 <= r[1] <= 5])
        neutrales = len([r for r in self.respuestas if 6 <= r[1] <= 7])
        positivos = len([r for r in self.respuestas if 8 <= r[1] <= 9])
        muy_positivos = len([r for r in self.respuestas if r[1] == 10])
        
        print("\n" + "="*50)
        print("üìà ESTAD√çSTICAS DETALLADAS")
        print("="*50)
        print(f"Total de respuestas: {total_respuestas}")
        print(f"Media de satisfacci√≥n: {media:.2f}/10")
        print(f"\nDistribuci√≥n de puntuaciones:")
        print(f"  üî¥ Muy negativas (1-3): {muy_negativos} respuestas")
        print(f"  üü† Negativas (4-5): {negativos} respuestas")
        print(f"  üü° Neutrales (6-7): {neutrales} respuestas")
        print(f"  üü¢ Positivas (8-9): {positivos} respuestas")
        print(f"  üíö Muy positivas (10): {muy_positivos} respuestas")
        
        # Porcentajes
        print(f"\nPorcentajes:")
        print(f"  Satisfacci√≥n negativa (1-5): {(muy_negativos + negativos) / total_respuestas * 100:.1f}%")
        print(f"  Satisfacci√≥n positiva (8-10): {(positivos + muy_positivos) / total_respuestas * 100:.1f}%")
    
    def mostrar_todas_respuestas(self):
        """Muestra todas las respuestas registradas"""
        if not self.respuestas:
            print("üìù No hay respuestas registradas")
            return
        
        print("\n" + "="*70)
        print("üìù TODAS LAS RESPUESTAS REGISTRADAS")
        print("="*70)
        
        for i, (cliente, puntuacion, comentario) in enumerate(self.respuestas, 1):
            emoji = "üî¥" if puntuacion < 5 else "üü¢" if puntuacion >= 8 else "üü°"
            print(f"\n{i}. {cliente} - Puntuaci√≥n: {puntuacion}/10 {emoji}")
            if comentario:
                print(f"   Comentario: '{comentario}'")
    
    def buscar_comentarios_por_palabra(self, palabra):
        """
        Busca comentarios que contengan una palabra espec√≠fica
        
        Args:
            palabra (str): Palabra a buscar en los comentarios
        """
        resultados = [
            respuesta for respuesta in self.respuestas
            if palabra.lower() in respuesta[2].lower()
        ]
        
        if not resultados:
            print(f"\nüîç No se encontraron comentarios con la palabra '{palabra}'")
            return []
        
        print(f"\n" + "="*60)
        print(f"üîç COMENTARIOS CON LA PALABRA '{palabra.upper()}'")
        print("="*60)
        
        for i, (cliente, puntuacion, comentario) in enumerate(resultados, 1):
            emoji = "üî¥" if puntuacion < 5 else "üü¢" if puntuacion >= 8 else "üü°"
            print(f"\n{i}. {cliente} - Puntuaci√≥n: {puntuacion}/10 {emoji}")
            print(f"   Comentario: '{comentario}'")
        
        return resultados

# Sistema interactivo
def sistema_interactivo():
    """Sistema interactivo de encuestas de satisfacci√≥n"""
    encuesta = EncuestaSatisfaccion()
    
    while True:
        print("\n" + "="*50)
        print("üìä SISTEMA DE ENCUESTAS DE SATISFACCI√ìN")
        print("="*50)
        print("1. Agregar respuesta")
        print("2. Calcular media de satisfacci√≥n")
        print("3. Listar comentarios negativos")
        print("4. Listar comentarios positivos")
        print("5. Mostrar todas las respuestas")
        print("6. Ver estad√≠sticas detalladas")
        print("7. Buscar en comentarios")
        print("8. Salir")
        
        opcion = input("\nSeleccione una opci√≥n (1-8): ").strip()
        
        if opcion == "1":
            print("\n--- Agregar Respuesta ---")
            cliente = input("Nombre del cliente: ").strip()
            try:
                puntuacion = int(input("Puntuaci√≥n (1-10): ").strip())
                comentario = input("Comentario (opcional): ").strip()
                encuesta.agregar_respuesta(cliente, puntuacion, comentario)
            except ValueError:
                print("‚ùå Error: La puntuaci√≥n debe ser un n√∫mero entero")
        
        elif opcion == "2":
            print("\n--- Media de Satisfacci√≥n ---")
            encuesta.calcular_media_satisfaccion()
        
        elif opcion == "3":
            print("\n--- Comentarios Negativos ---")
            encuesta.listar_comentarios_negativos()
        
        elif opcion == "4":
            print("\n--- Comentarios Positivos ---")
            encuesta.listar_comentarios_positivos()
        
        elif opcion == "5":
            print("\n--- Todas las Respuestas ---")
            encuesta.mostrar_todas_respuestas()
        
        elif opcion == "6":
            print("\n--- Estad√≠sticas Detalladas ---")
            encuesta.mostrar_estadisticas_detalladas()
        
        elif opcion == "7":
            print("\n--- Buscar en Comentarios ---")
            palabra = input("Palabra a buscar: ").strip()
            if palabra:
                encuesta.buscar_comentarios_por_palabra(palabra)
            else:
                print("‚ùå Error: Debe ingresar una palabra para buscar")
        
        elif opcion == "8":
            print("üëã ¬°Hasta pronto!")
            break
        
        else:
            print("‚ùå Opci√≥n no v√°lida. Por favor, seleccione 1-8")

# Ejemplo r√°pido de uso
def ejemplo_rapido():
    """Ejemplo r√°pido del sistema en funcionamiento"""
    print("üî¨ EJEMPLO R√ÅPIDO DEL SISTEMA")
    print("="*40)
    
    encuesta = EncuestaSatisfaccion()
    
    # Agregar algunas respuestas de ejemplo
    print("\n--- Agregando respuestas de ejemplo ---")
    encuesta.agregar_respuesta("Ana Garc√≠a", 9, "Excelente servicio, muy profesionales")
    encuesta.agregar_respuesta("Carlos L√≥pez", 3, "Muy mala atenci√≥n, demoras excesivas")
    encuesta.agregar_respuesta("Mar√≠a Rodr√≠guez", 7, "Buen servicio en general")
    encuesta.agregar_respuesta("Pedro S√°nchez", 2, "P√©sima experiencia, no recomiendo")
    encuesta.agregar_respuesta("Laura Mart√≠nez", 10, "¬°Incre√≠ble! El mejor servicio")
    encuesta.agregar_respuesta("Javier Ruiz", 4, "Podr√≠a mejorar en varios aspectos")
    
    # Mostrar resultados
    print("\n--- Media de Satisfacci√≥n ---")
    encuesta.calcular_media_satisfaccion()
    
    print("\n--- Comentarios Negativos ---")
    encuesta.listar_comentarios_negativos()
    
    print("\n--- Estad√≠sticas Detalladas ---")
    encuesta.mostrar_estadisticas_detalladas()
    
    print("\n--- Buscar comentarios con 'servicio' ---")
    encuesta.buscar_comentarios_por_palabra("servicio")

if __name__ == "__main__":
    # Ejecutar ejemplo r√°pido
    ejemplo_rapido()
    
    # Ejecutar sistema interactivo
    print("\n\nüéÆ SISTEMA INTERACTIVO")
    sistema_interactivo()
