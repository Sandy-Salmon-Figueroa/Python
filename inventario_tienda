class InventarioTienda:
    def __init__(self):
        """Inicializa el inventario de la tienda"""
        self.inventario = {}  # Diccionario: {producto: cantidad}
        self.agotados = set()  # Conjunto para productos sin stock
    
    def agregar_producto(self, producto, cantidad):
        """
        Agrega un producto al inventario o actualiza su cantidad
        
        Args:
            producto (str): Nombre del producto
            cantidad (int): Cantidad a agregar
        """
        if cantidad <= 0:
            print("‚ùå Error: La cantidad debe ser mayor a 0")
            return
        
        producto = producto.lower().strip()
        
        if producto in self.inventario:
            self.inventario[producto] += cantidad
            print(f"‚úÖ {producto.title()} actualizado. Stock: {self.inventario[producto]}")
        else:
            self.inventario[producto] = cantidad
            print(f"‚úÖ {producto.title()} agregado. Stock: {cantidad}")
        
        # Si el producto estaba agotado y ahora tiene stock, quitarlo de agotados
        if producto in self.agotados and self.inventario[producto] > 0:
            self.agotados.remove(producto)
            print(f"üîÑ {producto.title()} ya no est√° agotado")
    
    def vender_producto(self, producto, cantidad):
        """
        Vende una cantidad espec√≠fica de un producto
        
        Args:
            producto (str): Nombre del producto
            cantidad (int): Cantidad a vender
        """
        producto = producto.lower().strip()
        
        if producto not in self.inventario:
            print(f"‚ùå Error: {producto.title()} no existe en el inventario")
            return False
        
        if cantidad <= 0:
            print("‚ùå Error: La cantidad a vender debe ser mayor a 0")
            return False
        
        if self.inventario[producto] < cantidad:
            print(f"‚ùå Error: Stock insuficiente de {producto.title()}")
            print(f"   Stock disponible: {self.inventario[producto]}")
            return False
        
        # Realizar la venta
        self.inventario[producto] -= cantidad
        print(f"‚úÖ Vendidos {cantidad} unidades de {producto.title()}")
        print(f"   Stock restante: {self.inventario[producto]}")
        
        # Verificar si el producto se agot√≥
        if self.inventario[producto] == 0:
            self.agotados.add(producto)
            print(f"‚ö†Ô∏è {producto.title()} se ha agotado")
        
        return True
    
    def mostrar_inventario(self):
        """Muestra el inventario actualizado"""
        if not self.inventario:
            print("üìã El inventario est√° vac√≠o")
            return
        
        print("\n" + "="*50)
        print("üìã INVENTARIO ACTUALIZADO")
        print("="*50)
        
        # Ordenar productos alfab√©ticamente
        for producto in sorted(self.inventario.keys()):
            cantidad = self.inventario[producto]
            estado = "üî¥ AGOTADO" if cantidad == 0 else f"üü¢ {cantidad} unidades"
            print(f"‚Ä¢ {producto.title():<15} - {estado}")
    
    def mostrar_agotados(self):
        """Muestra solo los productos agotados"""
        if not self.agotados:
            print("‚úÖ No hay productos agotados")
            return
        
        print("\n" + "="*40)
        print("üî¥ PRODUCTOS AGOTADOS")
        print("="*40)
        
        for i, producto in enumerate(sorted(self.agotados), 1):
            print(f"{i}. {producto.title()}")
    
    def verificar_stock(self, producto):
        """
        Verifica el stock de un producto espec√≠fico
        
        Args:
            producto (str): Nombre del producto
        """
        producto = producto.lower().strip()
        
        if producto in self.inventario:
            stock = self.inventario[producto]
            if stock == 0:
                print(f"üî¥ {producto.title()} - AGOTADO")
            else:
                print(f"üü¢ {producto.title()} - Stock: {stock} unidades")
            return stock
        else:
            print(f"‚ùå {producto.title()} no encontrado en el inventario")
            return None
    
    def obtener_estadisticas(self):
        """Muestra estad√≠sticas del inventario"""
        total_productos = len(self.inventario)
        productos_disponibles = sum(1 for cantidad in self.inventario.values() if cantidad > 0)
        productos_agotados = len(self.agotados)
        stock_total = sum(self.inventario.values())
        
        print("\n" + "="*50)
        print("üìä ESTAD√çSTICAS DEL INVENTARIO")
        print("="*50)
        print(f"Total de productos: {total_productos}")
        print(f"Productos disponibles: {productos_disponibles}")
        print(f"Productos agotados: {productos_agotados}")
        print(f"Stock total: {stock_total} unidades")
        
        if self.inventario:
            # Producto con mayor stock
            producto_max = max(self.inventario.items(), key=lambda x: x[1])
            # Producto con menor stock (excluyendo agotados)
            productos_con_stock = {p: c for p, c in self.inventario.items() if c > 0}
            if productos_con_stock:
                producto_min = min(productos_con_stock.items(), key=lambda x: x[1])
                print(f"Producto con mayor stock: {producto_max[0].title()} ({producto_max[1]} unidades)")
                print(f"Producto con menor stock: {producto_min[0].title()} ({producto_min[1]} unidades)")

# Funci√≥n principal interactiva
def main():
    """Sistema interactivo de gesti√≥n de inventario"""
    tienda = InventarioTienda()
    
    while True:
        print("\n" + "="*40)
        print("üè™ SISTEMA DE INVENTARIO")
        print("="*40)
        print("1. Agregar producto")
        print("2. Vender producto")
        print("3. Mostrar inventario")
        print("4. Mostrar productos agotados")
        print("5. Verificar stock de producto")
        print("6. Ver estad√≠sticas")
        print("7. Salir")
        
        opcion = input("\nSeleccione una opci√≥n (1-7): ").strip()
        
        if opcion == "1":
            print("\n--- Agregar Producto ---")
            producto = input("Nombre del producto: ").strip()
            try:
                cantidad = int(input("Cantidad: ").strip())
                tienda.agregar_producto(producto, cantidad)
            except ValueError:
                print("‚ùå Error: La cantidad debe ser un n√∫mero entero")
        
        elif opcion == "2":
            print("\n--- Vender Producto ---")
            producto = input("Nombre del producto: ").strip()
            try:
                cantidad = int(input("Cantidad a vender: ").strip())
                tienda.vender_producto(producto, cantidad)
            except ValueError:
                print("‚ùå Error: La cantidad debe ser un n√∫mero entero")
        
        elif opcion == "3":
            print("\n--- Inventario Completo ---")
            tienda.mostrar_inventario()
        
        elif opcion == "4":
            print("\n--- Productos Agotados ---")
            tienda.mostrar_agotados()
        
        elif opcion == "5":
            print("\n--- Verificar Stock ---")
            producto = input("Nombre del producto: ").strip()
            tienda.verificar_stock(producto)
        
        elif opcion == "6":
            print("\n--- Estad√≠sticas ---")
            tienda.obtener_estadisticas()
        
        elif opcion == "7":
            print("üëã ¬°Hasta pronto!")
            break
        
        else:
            print("‚ùå Opci√≥n no v√°lida. Por favor, seleccione 1-7")

# Ejemplo de uso r√°pido
def ejemplo_rapido():
    """Muestra un ejemplo r√°pido del sistema funcionando"""
    print("üî¨ EJEMPLO R√ÅPIDO DEL SISTEMA")
    print("="*35)
    
    # Crear instancia del inventario
    inventario = InventarioTienda()
    
    # Agregar productos al inventario
    print("\n--- Agregando productos ---")
    inventario.agregar_producto("Laptop", 5)
    inventario.agregar_producto("Mouse", 10)
    inventario.agregar_producto("Teclado", 3)
    inventario.agregar_producto("Monitor", 2)
    
    # Mostrar inventario inicial
    print("\n--- Inventario inicial ---")
    inventario.mostrar_inventario()
    
    # Realizar algunas ventas
    print("\n--- Realizando ventas ---")
    inventario.vender_producto("Mouse", 3)
    inventario.vender_producto("Teclado", 3)  # Este se agotar√°
    inventario.vender_producto("Monitor", 1)
    
    # Mostrar estado actual
    print("\n--- Estado actual del inventario ---")
    inventario.mostrar_inventario()
    
    # Mostrar productos agotados
    print("\n--- Productos agotados ---")
    inventario.mostrar_agotados()
    
    # Verificar stock individual
    print("\n--- Verificaci√≥n de stock ---")
    inventario.verificar_stock("Laptop")
    inventario.verificar_stock("Teclado")
    
    # Mostrar estad√≠sticas
    print("\n--- Estad√≠sticas finales ---")
    inventario.obtener_estadisticas()

if __name__ == "__main__":
    # Ejecutar ejemplo r√°pido
    ejemplo_rapido()
    
    # Ejecutar sistema interactivo
    print("\n\nüéÆ MODO INTERACTIVO")
    print("="*35)
    main()
